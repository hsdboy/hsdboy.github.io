<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" type="text/css" href="./iconfont.css">
    <title>FlyFai</title>
</head>
<body>
<div class="float-font">
    <li class="iconfont icon icon-yueliang"></li>
    <li class="iconfont icon icon-taiyang"></li>
    <li class="iconfont icon icon-star"></li>
    <li class="iconfont icon icon-xin"></li>
</div>
<a href="http://hsdboy.github.io/game.boom">
<div class="red"></div></a>
<audio src="like.mp3" autoplay="autoplay">
</audio>
<div class="all">
    <div class="first">
        <div class="welcome">
            <li>W</li>
            <li>E</li>
            <li>L</li>
            <li>C</li>
            <li>O</li>
            <li>M</li>
            <li>E</li>
        </div>
        <div class="feng">
            <i>诗和远方</i>
            <i>风和自由</i>
            <i>朋友和酒</i>
            <i>老婆和狗</i>
        </div>

    </div>
    <div class="second">
        <img src="images/A.png" alt="">
        <i class="iconfont icon-shouye area">MY AREA</i>
        <ul>
            <li> I am always my hero</li>
            <li>Love means what</li>
            <li>Nobody do it like me</li>
            <li>Baby i feel all right</li>
            <li>Why no body fight!</li>
            <li>I feel lucky to see you.</li>
            <li>I want to be alone.</li>
            <li>See you in my heart</li>
        </ul>
        <div class="under">
            <a href="https://user.qzone.qq.com/1085548171">
                <li class="iconfont icon icon-qq"></li>
            </a>
            <a href="https://weibo.com/u/5730786903?refer_flag=1001030201_&is_hot=1">
                <li class="iconfont icon icon-weibo"></li>
            </a><a href="images/mmqrcode1529156214288.png">
            <li class="iconfont icon icon-wechat"></li>
        </a>
            <a href="http://hsdboy.github.io/angel/?a=1/">
                <li class="iconfont icon icon-xihuan1"></li>
            </a>
            <a href="https://github.com/hsdboy">
                <li class="iconfont icon icon-work"></li>
            </a>
        </div>
    </div>
    <div class="bottom">这是一条分界线</div>
    <div class="box">
        <div class="demo">
            <div class="item"></div>
            <div class="item"></div>
            <div class="item"></div>
            <div class="item"></div>
            <div class="item"></div>
            <div class="item"></div>
        </div>
    </div>
    <div class="box2">
        <div class="float">
            <div class="add"></div>
        </div>
        <div class="float">
            <div class="add"></div>
        </div>
        <div class="float">
            <div class="add"></div>
        </div>
    </div>
    <div class="box3">
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
        <div class="pic">
            <div class="color"></div>
        </div>
    </div>
    <div class="box3-5">
    <div class="clock">
        <div class="shadow"></div>
        <div class="gun"></div>
    </div>
    </div>
    <div class="box5">
        <div class="a">
            <div class="head">
                <div class="grade"></div>
                <div class="time"></div>
                <div class="flagnum"></div>
                <div class="fast"></div>
            </div>
            <div class="box5-1"></div>
        </div>
        <div class="start">开始</div>
        <div class="choose">
            <div class="easy">简单</div>
            <div class="middle">中等</div>
            <div class="hard">有点困难</div>
            <div class="littlehard">困难</div>
            <div class="veryhard">特别困难</div>
            <div class="underhard">地狱困难</div>
            <div class="nowin">你不可能赢</div>
        </div>

        <div class="end">
            <div class="two"></div>
            <div class="case"></div>
            <div class="three">
                <div class="restart">重新开始</div>
                <div class="rechoose">重新选择</div>
            </div>
        </div>

    </div>
    <div class="box4">
        <div class="lyric">
            <ul>
                <li> 扛住了 柴米油盐的麻烦</li>
                <li> 扛住了 朋友聚会的调侃</li>
                <li>扛住了 世俗生活的刁难</li>
                <li>却扛不住</li>
                <li> 对你的喜欢</li>
                <li> 亦步亦趋随你至深不可测</li>
                <li>患得患失唯恐你杳不可得</li>
                <li>却只面不改色</li>
                <li> 为你我认了</li>
                <li> 一朝一夕使我已固不可彻</li>
                <li> 若即若离本应是罪不可赦</li>
                <li> 怎不忍心怪你</li>
                <li> 对我太独特</li>
                <li> 无时无刻</li>
                <li> 像是一首无法停止单曲循环的无名歌</li>
                <li> 扛住了</li>
                <li> 柴米油盐的麻烦</li>
                <li> 扛住了</li>
                <li> 朋友聚会的调侃</li>
                <li> 扛住了</li>
                <li> 世俗生活的刁难</li>
                <li> 却扛不住</li>
                <li> 对你的喜欢</li>
                <li> 躲过了</li>
                <li> 世界末日的灾难</li>
                <li> 明白了</li>
                <li> 生命是千金不换</li>
                <li> 躲过了</li>
                <li> 大悲狂喜的极端</li>
                <li> 却躲不过</li>
                <li> 对你的喜欢</li>
                <li> 亦步亦趋随你至深不可测</li>
                <li> 患得患失唯恐你杳不可得</li>
                <li> 却只面不改色</li>
                <li> 为你我认了</li>
                <li> 一朝一夕使我已固不可彻</li>
                <li> 若即若离本应是罪不可赦</li>
                <li> 怎不忍心怪你</li>
                <li> 对我太独特</li>
                <li> 无时无刻</li>
                <li> 像是一首无法</li>
                <li>停止</li>
                <li>单曲</li>
                <li>循环的</li>
                <li>无名歌</li>
                <li> 扛住了</li>
                <li> 柴米油盐的麻烦</li>
                <li> 扛住了</li>
                <li> 朋友聚会的调侃</li>
                <li> 扛住了</li>
                <li> 世俗生活的刁难</li>
                <li> 却扛不住</li>
                <li> 对你的喜欢</li>
                <li> 躲过了</li>
                <li> 世界末日的灾难</li>
                <li> 明白了</li>
                <li> 生命是千金不换</li>
                <li> 躲过了</li>
                <li> 大悲狂喜的极端</li>
                <li> 却躲不过</li>
                <li> 对你的喜欢</li>
                <li> 看累了喜新厌旧</li>
                <li> 看累了随波逐流</li>
                <li> 看累了长厢厮守</li>
                <li> 却还没把你看透</li>
                <li> 看破了恩怨情仇</li>
                <li> 看破了蓦然回首</li>
                <li> 看破了从今以后</li>
                <li> 却始终被你左右</li>
                <li> 扛住了</li>
                <li> 柴米油盐的麻烦</li>
                <li> 扛住了</li>
                <li> 朋友聚会的调侃</li>
                <li> 扛住了</li>
                <li> 世俗生活的刁难</li>
                <li> 却扛不住</li>
                <li> 对你的喜欢</li>
                <li> 躲过了</li>
                <li> 世界末日的灾难</li>
                <li> 明白了</li>
                <li> 真心是千金不换</li>
                <li> 躲过了</li>
                <li> 大悲狂喜的极端</li>
                <li> 却躲不过</li>
                <li> 对你的喜欢</li>
                <li> 对你的喜欢</li>
                <li> 对你的喜欢</li>
                <li> 对你的喜欢</li>
                <li> 对你的喜欢</li>
                <li> 对你越喜欢</li>
                <li> 让我越难堪</li>
                <li> 然而再难堪</li>
                <li> 我依然</li>
                <li> 喜欢。</li>
                <li><img src="images/lyric.jpg" alt=""></li>
            </ul>
        </div>
        <div class="bit"></div>
        <div class="lyric-button"></div>
    </div>


</div>
<script src="jquery.js"></script>
<script src="script.js"></script>
<script>

    let fast = ["", "", "", "", "", "", ""]
    let count;

    $(".start").on("click", function () {
        $(this).fadeOut(100);
        $(".choose").slideDown(500);
    })
    let m;
    $(".choose").on("click", "div", function () {
        if ($(this).hasClass("easy")) {
            count = 10
            m = 0;
        }
        else if ($(this).hasClass("middle")) {
            count = 15;
            m = 1;
        }
        else if ($(this).hasClass("hard")) {
            count = 20;
            m = 2
        }
        else if ($(this).hasClass("littlehard")) {
            count = 25
            m = 3
        }
        else if ($(this).hasClass("veryhard")) {
            count = 30
            m = 4
        }
        else if ($(this).hasClass("underhard")) {
            count = 35
            m = 5
        }
        else if ($(this).hasClass("nowin")) {
            count = 40
            m = 6
        }
        $(".flagnum").html(count);
        let grade = $(this).html()
        $(".grade").html(grade);
        creat();

        $(".choose").hide();
    })

    function creat() {
        $(".box5-1").show(500);
        $(".head").show(500).css("display", "flex");
        $(".time").html("时间:0").width("25%")
        if (localStorage.fast) {
            fast = JSON.parse(localStorage.fast);
        }
        for (let i = 0; i < 6; i++) {
            if (i === m && fast[i] === "") {
                $(".fast").html("最短时间:暂无")
            }
            else if (i === m && fast[i]) {
                $(".fast").html("最短" + fast[i]);
            }
        }
        do {
            $(".box5-1").empty()
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    let isbomb;
                    if (count === 10) {
                        isbomb = Math.random() > 0.9
                    }
                    else if (count === 15) {
                        isbomb = Math.random() > 0.85
                    }
                    else if (count === 20) {
                        isbomb = Math.random() > 0.8
                    }
                    else if (count === 25) {
                        isbomb = Math.random() > 0.75
                    }
                    else if (count === 30) {
                        isbomb = Math.random() > 0.7
                    }
                    else if (count === 35) {
                        isbomb = Math.random() > 0.65
                    }
                    else if (count === 40) {
                        isbomb = Math.random() > 0.6
                    }


                    $("<div>")
                        .attr("id", i + "-" + j)
                        .addClass(function () {
                            return "block " + (isbomb ? "bomb" : "")
                        })
                        .appendTo($(".box5-1"))
                }
            }
        } while ($(".bomb").length !== count)
    }

    $(".box5-1").on("click", ".block", clickhead);
    $(".box5-1").one("click", settime);
    $(".box5-1").on("contextmenu", ".block:not(.number)", rightclick);
    $(".box5-1").on("contextmenu", function (e) {
        e.preventDefault();
    })

    function rightclick(e) {
        e.preventDefault();
        $(this).toggleClass("flag")

        let flag = $(this).hasClass("flag");
        $(".flagnum").html(function (index, oldval) {
            return flag ? oldval - 1 : parseInt(oldval) + 1
        })
        if (($(".bomb").filter(".flag")).length === count && parseInt($(".flagnum").html()) === 0) {
            gameover(true);
        }
    }

    function clickhead() {
        if ($(this).hasClass("bomb")) {
            $(".bomb").addClass("show")
            gameover(false);
            return;
        }
        if ($(this).hasClass("number")) {
            return;
        }
        if ($(this).hasClass("flag")) {
            return;
        }
        $(this).addClass("number")

        let n = 0;
        let id = $(this).attr("id");
        let x = parseInt(id.charAt(0))
        let y = parseInt(id.charAt(2))
        for (let i = x - 1; i <= x + 1; i++) {
            for (let j = y - 1; j <= y + 1; j++) {
                if ($("#" + i + "-" + j).hasClass("bomb")) {
                    n++;
                }
            }
        }
        $(this).html(n).addClass("back")
        if (n === 0) {
            for (let i = x - 1; i <= x + 1; i++) {
                for (let j = y - 1; j <= y + 1; j++) {
                    let obj = $("#" + i + "-" + j);
                    if (!obj.hasClass("number") && obj.length === 1) {
                        clickhead.call(obj[0]);
                    }
                }
            }
        }


    }

    let t;

    function settime() {
        let time = 0;
        t = setInterval(function () {
            time++;
            $(".time").html("时间:" + time)
        }, 1000)
    }


    function gameover(success) {
        let time = $(".time").html();
        let grade = $(".grade").html();
        clearInterval(t)
        $(".time").html(time)
        $(".end").slideDown(500);
        $(".case").html(function () {
            return (success ? "You Win!" : "You Fail!")
        })
        $(".two").html("等级:" + grade + time + "s")
        if (success) {
            for (let i = 0; i < 6; i++) {
                if (i === ((count - 10) / 5)) {
                    if (time < fast[i] || fast[i] === "") {
                        fast[i] = time;
                        localStorage.fast = JSON.stringify(fast);
                    }
                }
            }
        }
    }

    $(".restart").on("click", function () {
        $(".end").hide();
        creat();
        clearInterval(t);
        $(".flagnum").html(count);
        $(".box5-1").one("click", settime)
        $(".time").html(0);
    })
    $(".rechoose").on("click", function () {
        $(".end").hide();
        $(".choose").slideDown(500);
        clearInterval(t);
        $(".box5-1").one("click", settime)
        $(".time").html(0);
    })
</script>
</body>
</html>